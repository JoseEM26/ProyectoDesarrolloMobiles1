<!-- src/app/components/login/login.component.html -->
<div class="login-container">
  <div class="login-card">
    <h2 class="text-center text-primary animate__animated animate__fadeInDown">Iniciar Sesión</h2>
    <p class="text-center text-muted mb-4 animate__animated animate__fadeInDown animate__delay-1s">
      Bienvenido al Sistema del Instituto Tecnológico
    </p>
    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show animate__animated animate__shakeX" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ errorMessage }}
      <button type="button" class="btn-close" (click)="errorMessage = null" aria-label="Cerrar alerta"></button>
    </div>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate class="animate__animated animate__fadeInUp">
      <div class="mb-3">
        <label for="correo" class="form-label text-dark">Correo Institucional</label>
        <div class="input-group glow-effect">
          <span class="input-group-text bg-transparent border-0">
            <i class="bi bi-envelope-fill text-secondary"></i>
          </span>
          <input
            id="correo"
            type="email"
            formControlName="correoInstitucional"
            class="form-control border-0 shadow-sm"
            placeholder="correo@computronica.edu"
            [class.is-invalid]="correoControl?.touched && correoControl?.invalid"
            aria-describedby="correoError"
            required
          >
        </div>
        <div *ngIf="correoControl?.touched && correoControl?.invalid" id="correoError" class="invalid-feedback">
          <div *ngIf="correoControl?.errors?.['required']">El correo es obligatorio</div>
          <div *ngIf="correoControl?.errors?.['email']">Ingresa un correo válido</div>
        </div>
      </div>
      <div class="mb-3">
        <label for="contrasena" class="form-label text-dark">Contraseña</label>
        <div class="input-group glow-effect">
          <span class="input-group-text bg-transparent border-0">
            <i class="bi bi-lock-fill text-secondary"></i>
          </span>
          <input
            id="contrasena"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="contrasena"
            class="form-control border-0 shadow-sm"
            placeholder="******"
            [class.is-invalid]="contrasenaControl?.touched && contrasenaControl?.invalid"
            aria-describedby="contrasenaError"
            required
          >
          <button
            type="button"
            class="btn btn-outline-secondary border-0"
            (click)="togglePasswordVisibility()"
            aria-label="Alternar visibilidad de contraseña"
          >
            <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
          </button>
        </div>
        <div *ngIf="contrasenaControl?.touched && contrasenaControl?.invalid" id="contrasenaError" class="invalid-feedback">
          <div *ngIf="contrasenaControl?.errors?.['required']">La contraseña es obligatoria</div>
          <div *ngIf="contrasenaControl?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</div>
        </div>
      </div>
      <div class="form-check mb-4">
        <input
          id="rememberMe"
          type="checkbox"
          formControlName="rememberMe"
          class="form-check-input"
          aria-label="Recordarme"
        >
        <label for="rememberMe" class="form-check-label text-muted">Recordarme</label>
      </div>
      <button
        type="submit"
        class="btn btn-primary w-100 btn-3d"
        [disabled]="loading || loginForm.invalid"
        aria-label="Iniciar sesión"
      >
        <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
        {{ loading ? 'Cargando...' : 'Iniciar Sesión' }}
      </button>
    </form>
    <div class="mt-4 text-center">
      <a routerLink="/register" class="text-secondary link-glow" aria-label="Ir a registro">¿No tienes cuenta? Regístrate</a>
    </div>
  </div>
</div>
